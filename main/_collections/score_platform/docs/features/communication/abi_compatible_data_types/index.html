
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ABI Compatible Data Types &#8212; REF_INT  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/score.css?v=6e51530f" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/score_needs.css?v=e97392eb" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/score_design.css?v=d9fd870c" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-needs/modern.css?v=803738c0" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../../../../_static/documentation_options.js?v=7f41d439"></script>
    <script src="../../../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../../../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../../../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../../../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../../../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_collections/score_platform/docs/features/communication/abi_compatible_data_types/index';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://rmaddikery.github.io/reference_integration/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="Requirements" href="requirements.html" />
    <link rel="prev" title="SOME/IP Gateway Service Discovery" href="../some_ip_gateway/service_discovery/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Eclipse S-CORE</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../verification/verification.html">
    Verification Reports Summaries
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../index.html">
    S-CORE Platform
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../place_holder/persistency.html">
    Persistency
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../place_holder/orchestrator.html">
    Orchestrator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../place_holder/communication.html">
    Communication
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../../../score_process/process/index.html">
    Process description
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../../../../score_docs_as_code/docs/index.html">
    Docs-As-Code
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../verification/verification.html">
    Verification Reports Summaries
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../index.html">
    S-CORE Platform
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../place_holder/persistency.html">
    Persistency
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../place_holder/orchestrator.html">
    Orchestrator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../../place_holder/communication.html">
    Communication
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../score_process/process/index.html">
    Process description
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../../score_docs_as_code/docs/index.html">
    Docs-As-Code
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../handbook/project_basics/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../handbook/own_application/index.html">Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../handbook/building_simple_application/index.html">Contribute own module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../handbook/index.html">Handbook</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../index.html">Features</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../ai_platform/index.html">AI Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analysis-infra/index.html">Analysis Infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../baselibs/index.html">Base Libraries (v0.5 beta)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../code_generation/index.html">Code Generation</a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../index.html">Communication (v0.5 beta)</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../docs/architecture/index.html">Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../docs/requirements/index.html">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipc/index.html">Inter-process Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../some_ip_gateway/index.html">SOME/IP-Gateway</a></li>
<li class="toctree-l3 current active has-children"><a class="current reference internal" href="#">ABI Compatible Data Types</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="requirements.html">Requirements</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../configuration/index.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../diagnostics/index.html">Diagnostic and Fault Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frameworks/index.html">Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lifecycle/index.html">Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../orchestration/index.html">Orchestration (v0.5 beta)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../persistency/index.html">Persistency (v0.5 beta)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../security_crypto/index.html">Security &amp; Cryptography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../time/index.html">Time</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../requirements/index.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules/index.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../score_releases/index.html">S-CORE Releases</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../score_tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../platform_management_plan/index.html">PMP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://projects.eclipse.org/projects/automotive.score">Eclipse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_decisions/index.html">Decision Records</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Eclipse S-CORE (Eclipse Safe Open Vehicle Core)</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../../index.html" class="nav-link">Documentation</a></li>
    
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Features</a></li>
    
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Communication (v0.5 beta)</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">ABI Compatible Data Types</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="abi-compatible-data-types">
<span id="abi-compatible-data-types-feature"></span><h1>ABI Compatible Data Types<a class="headerlink" href="#abi-compatible-data-types" title="Link to this heading">#</a></h1>
<div class="need_container docutils container" id="SNCB-9d07f080">
<div class="pst-scrollable-table-container"><table class="need needs_grid_complex needs_layout_score needs_style_none needs_type_document table" id="doc__abi_compatible_data_types">
<tbody>
<tr class="head row-odd"><td class="head_left" colspan="2"><div class="needs_head_left line-block">
<div class="line"><span><span class="needs_title"><span class="needs_data">ABI Compatible Datatypes</span></span></span></div>
</div>
</td>
<td class="head_center" colspan="2"><div class="needs_head line-block">
<div class="line"><span><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">valid</span></span></span></div>
<div class="line"><span><span class="needs_security"><span class="needs_label">security: </span><span class="needs_data">YES</span></span></span></div>
<div class="line"><span><span class="needs_safety"><span class="needs_label">safety: </span><span class="needs_data">ASIL_B</span></span></span></div>
</div>
</td>
<td class="head_right" colspan="2"><div class="needs_head_right line-block">
<div class="line"><span><span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span></span></div>
</div>
</td>
</tr>
<tr class="meta row-even"><td class="meta" colspan="3"><div class="needs_meta_left line-block">
<div class="line"><span><span><div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">feature_request</span><span class="needs_spacer">, </span><span class="needs_data">change_management</span><span class="needs_spacer">, </span><span class="needs_data">communication</span><span class="needs_spacer">, </span><span class="needs_data">abi_compatible_data_types</span></span></span></div>
</span></span></div>
<div class="line"><span><div class="line">realizes: <span class="realizes"><span><a class="reference internal" href="../../../../../score_process/process/process_areas/change_management/change_management_workproducts.html#wp__feat_request" title="doc__abi_compatible_data_types">wp__feat_request</a></span></span></div>
</span></div>
</div>
</td>
<td class="meta" colspan="3"></td>
</tr>
<tr class="content row-odd"><td class="content" colspan="6"></td>
</tr>
<tr class="footer row-even"><td class="footer_left" colspan="2"><div class="needs_footer_left line-block">
<div class="line"><span><span class="needs-id"><a class="reference internal" href="#doc__abi_compatible_data_types" title="doc__abi_compatible_data_types">doc__abi_compatible_data_types</a></span></span></div>
</div>
</td>
<td class="footer" colspan="2"><div class="needs_footer line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Generic Document</span></span></span></div>
</div>
</td>
<td class="footer_right" colspan="2"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="toctree-wrapper compound">
</div>
<section id="feature-flag">
<h2>Feature flag<a class="headerlink" href="#feature-flag" title="Link to this heading">#</a></h2>
<p>To activate this feature, use the following feature flag:</p>
<p><code class="docutils literal notranslate"><span class="pre">experimental_abi_compatible_data_types</span></code></p>
</section>
<section id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Link to this heading">#</a></h2>
<p>This feature request defines a set of ABI-compatible data types and a runtime type metadata format to support zero-copy inter-process communication between C++17 and Rust 1.88 processes using the same endianness. It ensures consistent type layouts across languages by requiring fixed-size, statically allocated types without absolute pointers or language-specific metadata.</p>
<p>The specification covers primitive types, structs, enums, arrays, and introduces ABI-stable representations for vectors, strings, options, and results. An optional runtime-readable type structure metadata enables processes to interpret shared memory without compile-time access to type definitions.</p>
</section>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Link to this heading">#</a></h2>
<p>This feature request addresses specific challenges in achieving type compatibility within our inter-process communication (IPC) framework that leverages zero-copy shared memory mechanisms. Two essential scenarios are under evaluation:</p>
<ol class="arabic simple">
<li><p><strong>ABI Compatibility</strong>: Processes implemented in different programming languages (C++17 and Rust 1.88) must interpret a shared memory location consistently as the same native type, provided both have compile-time access to the type definition. This scenario eliminates serialization overhead and allows direct memory access.</p></li>
<li><p><strong>Type Structure Metadata</strong>: It should be possible to record arbitrary data streams, and convert or analyze them at a later time and/or on a different system, without having to recompile the conversion or analysis tools for that particular data format. A machine-readable description of the format, including any user-defined data types, should be available on request during runtime. In addition, this structure description could potentially be used by gateway processes to perform relatively simple but generic transformations between different data representations.</p></li>
</ol>
<section id="abi-compatibility">
<h3>ABI Compatibility<a class="headerlink" href="#abi-compatibility" title="Link to this heading">#</a></h3>
<p>Our communication feature relies on shared memory to transfer data between processes. For effective zero-copy data exchange, processes written in C++17 and Rust 1.88 must inherently understand the data at shared memory locations identically. Achieving this requires ensuring that data types have consistent, fixed-size memory layouts.</p>
<p>This evaluation initially targets the following process configurations:</p>
<ul class="simple">
<li><p>Processes running on the same operating system.</p></li>
<li><p>Processes running on different operating systems but under the same hypervisor.</p></li>
</ul>
<p>Supporting different endianness between processes is explicitly out of scope, as it inherently demands bit manipulation, effectively requiring serialization.
A mechanism to ensure that sender and receiver use the same endianness is out of scope as well.
Different bit widths, however, are implicitly supported by specifying the width of all types and excluding word-size integers.</p>
<p>The following data types shall be supported:</p>
<ul class="simple">
<li><p><strong>Primitive Types</strong>:</p>
<ul>
<li><p>Boolean</p></li>
<li><p>Integer (signed and unsigned, 8/16/32/64-bit)</p></li>
<li><p>Floating-point:</p>
<ul>
<li><p>IEEE 754 binary 32/64-bit</p></li>
<li><p>FP16/bfloat16 (<em>optional</em>)</p></li>
</ul>
</li>
<li><p>Character (Unicode scalar value)</p></li>
</ul>
</li>
<li><p><strong>Sequence Types</strong>:</p>
<ul>
<li><p>Array (fixed-length)</p></li>
</ul>
</li>
<li><p><strong>User-Defined Types</strong>:</p>
<ul>
<li><p>Struct</p></li>
<li><p>Tuple</p></li>
<li><p>Enum (tag-only)</p></li>
<li><p>Variant (“tagged union”; <em>optional</em>)</p></li>
</ul>
</li>
<li><p><strong>Fixed-Size, Variable-Length Containers</strong>:</p>
<ul>
<li><p>Vector</p></li>
<li><p>String (UTF-8 encoded)</p></li>
<li><p>Queue</p></li>
<li><p>Hash map (<em>optional</em>)</p></li>
<li><p>Hash set (<em>optional</em>)</p></li>
<li><p>Binary tree (<em>optional</em>)</p></li>
</ul>
</li>
<li><p><strong>Specialized Variants</strong>:</p>
<ul>
<li><p>Result</p></li>
<li><p>Option</p></li>
</ul>
</li>
</ul>
<p>All provided data types must ensure fixed size and consistent memory layouts.</p>
</section>
<section id="type-description">
<h3>Type Description<a class="headerlink" href="#type-description" title="Link to this heading">#</a></h3>
<p>A critical scalability feature involves gateway processes, which subscribe to IPC endpoints and translate ABI-compatible data types into external serialization formats. These gateways require the ability to interpret data without compile-time access to type definitions. To address this, an explicit runtime-readable type description format is necessary. This description allows dynamic, runtime interpretation of data structures, enabling the addition of new IPC topics without recompiling gateway processes.</p>
</section>
<section id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h3>
<p>In summary, the motivation behind this feature request is to define and standardize ABI-compatible data types and a runtime-accessible type description mechanism to ensure interoperability and scalability in zero-copy IPC scenarios involving multiple languages and dynamic environments.</p>
</section>
</section>
<section id="specification">
<h2>Specification<a class="headerlink" href="#specification" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>ABI Compatibility<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>This specification defines the set of rules and constraints for representing data types in shared memory such that they can be interpreted consistently across processes implemented in C++17 and Rust 1.88. These types enable zero-copy inter-process communication by enforcing ABI compatibility at the memory layout level. The focus is on data exchange between processes using the same endianness.</p>
<section id="assumptions">
<h4>Assumptions<a class="headerlink" href="#assumptions" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Shared memory regions are mapped at correctly aligned virtual addresses in both processes.</p></li>
<li><p>No serialization or runtime copying occurs when interpreting a type from memory.</p></li>
<li><p>Processes use the same endianness.</p></li>
<li><p>No synchronization or atomicity guarantees are defined at the data type level; these must be provided by the accessing code.</p></li>
<li><p>All memory is allocated statically or pre-reserved. Dynamic memory allocation is disallowed.</p></li>
</ul>
</section>
<section id="type-conformance">
<h4>Type Conformance<a class="headerlink" href="#type-conformance" title="Link to this heading">#</a></h4>
<p>Types used in shared memory must meet the following criteria:</p>
<ol class="arabic simple">
<li><p><strong>Fixed size and alignment</strong>: Every type must have a known, constant size and alignment at compile time.</p></li>
<li><p><strong>Consistent layout across languages</strong>: The layout of a type must be identical in Rust and C++, and on all platforms.</p></li>
<li><p><strong>No absolute pointers or references</strong>: Types must not contain absolute pointers/function pointers/references or any pointers/references that point out of the transferred data.</p></li>
<li><p><strong>No language-specific metadata</strong>: No vtables, slice headers, or implementation-specific type markers are allowed.</p></li>
</ol>
<p>Each type definition must clearly indicate whether it conforms to these rules natively or requires a custom definition to do so.</p>
</section>
<section id="type-categories">
<h4>Type Categories<a class="headerlink" href="#type-categories" title="Link to this heading">#</a></h4>
<section id="primitive-types">
<h5>Primitive Types<a class="headerlink" href="#primitive-types" title="Link to this heading">#</a></h5>
<p>These types are ABI-compatible when declared using fixed-size standard types:</p>
<div class="pst-scrollable-table-container"><table class="table" id="id3">
<caption><span class="caption-number">Table 6 </span><span class="caption-text">Native Type Mapping</span><a class="headerlink" href="#id3" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Concept</p></th>
<th class="head"><p>Rust</p></th>
<th class="head"><p>C++17</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Boolean</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AbiBool</span></code> (1 byte, with <code class="docutils literal notranslate"><span class="pre">0x00</span></code> representing <code class="docutils literal notranslate"><span class="pre">false</span></code> and <code class="docutils literal notranslate"><span class="pre">0x01</span></code> representing <code class="docutils literal notranslate"><span class="pre">true</span></code> as the only valid bit patterns)</p></td>
</tr>
<tr class="row-odd"><td><p>Integers (N = 8, 16, 32, 64)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">uN</span></code>, <code class="docutils literal notranslate"><span class="pre">iN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">std::uintN_t</span></code>, <code class="docutils literal notranslate"><span class="pre">std::intN_t</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Floating point</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">f32</span></code>, <code class="docutils literal notranslate"><span class="pre">f64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code> (compliant with IEEE 754)</p></td>
</tr>
<tr class="row-odd"><td><p>Character</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">char</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">AbiChar</span></code> (32-bit unsigned integer, valid bit patterns <code class="docutils literal notranslate"><span class="pre">0x0</span></code> to <code class="docutils literal notranslate"><span class="pre">0xD7FF</span></code> and <code class="docutils literal notranslate"><span class="pre">0xE000</span></code> to <code class="docutils literal notranslate"><span class="pre">0x10FFFF</span></code>)</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Booleans can’t be represented as native <code class="docutils literal notranslate"><span class="pre">bool</span></code> type in C++, because the language doesn’t guarantee a size of 1 byte, and it doesn’t guarantee that only the values <code class="docutils literal notranslate"><span class="pre">0x00</span></code> and <code class="docutils literal notranslate"><span class="pre">0x01</span></code> will be stored in memory.</p></li>
<li><p>Characters can’t be represented as native <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> type in C++ without a wrapper, because it must be guaranteed that <em>surrogate code points</em> (<code class="docutils literal notranslate"><span class="pre">0xD800</span></code> to <code class="docutils literal notranslate"><span class="pre">0xDFFF</span></code>) and non-code points (values above <code class="docutils literal notranslate"><span class="pre">0x10FFFF</span></code>) won’t be stored in memory.</p></li>
</ul>
</section>
<section id="structs-and-tuples">
<h5>Structs and Tuples<a class="headerlink" href="#structs-and-tuples" title="Link to this heading">#</a></h5>
<p>Structs and tuples are supported using standard layout rules:</p>
<ul class="simple">
<li><p><strong>Rust</strong>: Requires <code class="docutils literal notranslate"><span class="pre">#[repr(C)]</span></code>
(guarantees C-compatible memory layout;
<a class="reference external" href="https://doc.rust-lang.org/reference/type-layout.html#the-c-representation">full specification</a>)</p></li>
<li><p><strong>C++</strong>: Requires <code class="docutils literal notranslate"><span class="pre">standard_layout</span></code>
(no virtual functions, no virtual inheritance, and only one class in the hierarchy has non-static data members;
<a class="reference external" href="https://en.cppreference.com/w/cpp/language/classes.html#Standard-layout_class">full specification</a>)</p></li>
</ul>
<p>Field types must themselves be ABI compatible.
Field ordering must be preserved and padding must be identical across compilers. Any alignment greater than the default must be explicitly declared.
Empty structs and tuples are forbidden, because zero-sized types have different representations in C++ and Rust.</p>
</section>
<section id="enums">
<h5>Enums<a class="headerlink" href="#enums" title="Link to this heading">#</a></h5>
<p>Fieldless enums with a defined underlying integer type are supported. These must use:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#[repr(u8)]</span></code>, <code class="docutils literal notranslate"><span class="pre">#[repr(u16)]</span></code>, etc. in Rust</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">class</span> <span class="pre">MyEnum</span> <span class="pre">:</span> <span class="pre">std::uint8_t</span></code> in C++</p></li>
</ul>
<p>Each entry in an enum must have well-defined representation.
Enums with payloads (“variants” or “tagged unions”) are optionally supported.</p>
</section>
<section id="arrays">
<h5>Arrays<a class="headerlink" href="#arrays" title="Link to this heading">#</a></h5>
<p>Fixed-size arrays are naturally ABI-compatible and supported in both languages.</p>
<ul class="simple">
<li><p>Rust: <code class="docutils literal notranslate"><span class="pre">[T;</span> <span class="pre">N]</span></code></p></li>
<li><p>C++: wrapper around <code class="docutils literal notranslate"><span class="pre">T[N]</span></code> to enforce bounds-checking for element access</p></li>
</ul>
<p>Element types must themselves be ABI compatible. No dynamic length information is allowed.
Empty arrays (<code class="docutils literal notranslate"><span class="pre">N=0</span></code>) are forbidden, because zero-sized types have different representations in C++ and Rust.</p>
</section>
<section id="vectors">
<h5>Vectors<a class="headerlink" href="#vectors" title="Link to this heading">#</a></h5>
<p>To provide bounded sequence types with familiar APIs, a custom vector implementation must be provided in both languages that matches the memory layout defined below.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="cp">#[repr(C)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">AbiVec</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">N</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">len</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span>
<span class="w">    </span><span class="n">elements</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">T</span><span class="p">;</span><span class="w"> </span><span class="n">N</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">AbiVec</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">elements</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Capacity is fixed and equal to <code class="docutils literal notranslate"><span class="pre">N</span></code> elements at compile time.</p></li>
<li><p>Overflow beyond capacity must be a checked error.</p></li>
<li><p>No heap allocation is permitted.</p></li>
<li><p>Internally, these are ABI-compatible with <code class="docutils literal notranslate"><span class="pre">len</span></code> and <code class="docutils literal notranslate"><span class="pre">elements</span></code> accessible from both languages.</p></li>
<li><p>The public API must match standard vector types in usability (e.g. <code class="docutils literal notranslate"><span class="pre">push()</span></code>, <code class="docutils literal notranslate"><span class="pre">pop()</span></code>).</p></li>
<li><p>Zero-capacity vectors (<code class="docutils literal notranslate"><span class="pre">N=0</span></code>) are forbidden, because zero-sized arrays have different representations in C++ and Rust.</p></li>
</ul>
</section>
<section id="strings">
<h5>Strings<a class="headerlink" href="#strings" title="Link to this heading">#</a></h5>
<p>Strings have the same memory layout as <code class="docutils literal notranslate"><span class="pre">AbiVec&lt;u8&gt;</span></code>, but additionally guarantee that their content is valid UTF-8.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="cp">#[repr(C)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">AbiString</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">len</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span>
<span class="w">    </span><span class="n">bytes</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="n">N</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">AbiString</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">bytes</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Capacity is fixed and equal to <code class="docutils literal notranslate"><span class="pre">N</span></code> bytes at compile time.</p></li>
<li><p>Overflow beyond capacity must be a checked error.</p></li>
<li><p>No heap allocation is permitted.</p></li>
<li><p>The public API must provide for a way to extend the string by a single character (Unicode scalar value) and by a string slice encoded as UTF-8.</p></li>
<li><p>Zero-capacity strings (<code class="docutils literal notranslate"><span class="pre">N=0</span></code>) are forbidden, because zero-sized array have different representations in C++ and Rust.</p></li>
</ul>
</section>
<section id="option-types">
<h5>Option Types<a class="headerlink" href="#option-types" title="Link to this heading">#</a></h5>
<p>ABI-compatible optional types must be implemented manually using a one-byte tag followed by a payload.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="cp">#[repr(C)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">AbiOption</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">is_some</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span>
<span class="w">    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">AbiOption</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">AbiBool</span><span class="w"> </span><span class="n">is_some</span><span class="p">;</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_some</span> <span class="pre">==</span> <span class="pre">false</span></code> indicates absence; <code class="docutils literal notranslate"><span class="pre">true</span></code> indicates presence.</p></li>
<li><p>The value field is always initialized and occupies memory regardless of state.</p></li>
<li><p>The public API should match standard optional types in usability, as far as possible.</p></li>
</ul>
</section>
<section id="result-types">
<h5>Result Types<a class="headerlink" href="#result-types" title="Link to this heading">#</a></h5>
<p>Result types represent tagged unions with two possible states.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="cp">#[repr(C)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">AbiResult</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">is_err</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span>
<span class="w">    </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">AbiResultUnion</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[repr(C)]</span>
<span class="k">union</span><span class="w"> </span><span class="nc">AbiResultUnion</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ok</span><span class="p">:</span><span class="w"> </span><span class="nc">ManuallyDrop</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">err</span><span class="p">:</span><span class="w"> </span><span class="nc">ManuallyDrop</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">E</span><span class="o">&gt;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">AbiResult</span><span class="w"> </span><span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">AbiBool</span><span class="w"> </span><span class="n">is_err</span><span class="p">;</span>
<span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">T</span><span class="w"> </span><span class="n">ok</span><span class="p">;</span>
<span class="w">        </span><span class="n">E</span><span class="w"> </span><span class="n">err</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_err</span> <span class="pre">==</span> <span class="pre">false</span></code> indicates <code class="docutils literal notranslate"><span class="pre">ok</span></code> field is valid</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_err</span> <span class="pre">==</span> <span class="pre">true</span></code> indicates <code class="docutils literal notranslate"><span class="pre">err</span></code> field is valid</p></li>
<li><p>The layout must guarantee correct union member interpretation based on the discriminant</p></li>
</ul>
</section>
<section id="language-conformance-summary">
<h5>Language Conformance Summary<a class="headerlink" href="#language-conformance-summary" title="Link to this heading">#</a></h5>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Rust Native Support</p></th>
<th class="head"><p>C++ Native Support</p></th>
<th class="head"><p>Specification Status</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Primitives</p></td>
<td><p>✅ Native types</p></td>
<td><p>⚠ Native and custom types</p></td>
<td><p>Conforming</p></td>
</tr>
<tr class="row-odd"><td><p>Structs</p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">#[repr(C)]</span></code></p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">standard_layout</span></code></p></td>
<td><p>Conforming</p></td>
</tr>
<tr class="row-even"><td><p>Enums (fieldless)</p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">#[repr(C)]</span></code></p></td>
<td><p>✅ With fixed base</p></td>
<td><p>Conforming</p></td>
</tr>
<tr class="row-odd"><td><p>Arrays</p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">[T;</span> <span class="pre">N]</span></code></p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">std::array&lt;T,</span> <span class="pre">N&gt;</span></code></p></td>
<td><p>Conforming</p></td>
</tr>
<tr class="row-even"><td><p>Vector</p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">Vec&lt;T&gt;</span></code></p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">std::vector&lt;T&gt;</span></code></p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">AbiVec&lt;T,</span> <span class="pre">N&gt;</span></code> required</p></td>
</tr>
<tr class="row-odd"><td><p>String</p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">String</span></code></p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">std::string</span></code></p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">AbiString&lt;N&gt;</span></code> required</p></td>
</tr>
<tr class="row-even"><td><p>Option</p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">Option&lt;T&gt;</span></code></p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">std::optional&lt;T&gt;</span></code></p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">AbiOption&lt;T&gt;</span></code> required</p></td>
</tr>
<tr class="row-odd"><td><p>Result</p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">Result&lt;T,</span> <span class="pre">E&gt;</span></code></p></td>
<td><p>❌ <code class="docutils literal notranslate"><span class="pre">std::expected&lt;T,</span> <span class="pre">E&gt;</span></code></p></td>
<td><p>✅ <code class="docutils literal notranslate"><span class="pre">AbiResult&lt;T,</span> <span class="pre">E&gt;</span></code> required</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="id2">
<h3>Type Description<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>To address the scenarios outlined in the motivation, a clearly defined type description mechanism is required.</p>
<section id="workflows">
<h4>Workflows<a class="headerlink" href="#workflows" title="Link to this heading">#</a></h4>
<p>Two potential workflows are considered for creating type descriptions:</p>
<p><strong>Description-first Workflow</strong>: The type description is defined independently (e.g., via a schema or domain-specific language). The C++ and Rust type definitions are then generated based on this description as part of the application build process.</p>
<p><strong>Definition-first Workflow</strong>: Existing type definitions in Rust or C++ are the source of truth, and the corresponding type description is generated during the build process via compiler tooling.</p>
<p>Both workflows are valid, and the final decision is deferred pending further feasibility analysis.</p>
</section>
<section id="type-structure-metadata">
<h4>Type Structure Metadata<a class="headerlink" href="#type-structure-metadata" title="Link to this heading">#</a></h4>
<p>Precise information about the structure of the types is preserved for use during runtime, enabling a process without compile-time access to type definitions to correctly interpret a given memory location according to the previously established ABI rules.
The format of the type metadata shall explicitly support versioning to allow schema evolution and backward compatibility. It must accommodate all data types described earlier in the ABI compatibility section. It should be simple, human-readable, and easily machine-parsable.</p>
<p>The choice of serialization format is left open but may include RON, JSON5, or a custom DSL, based on readability, tooling support, and maintainability.</p>
</section>
</section>
</section>
<section id="security-impact">
<h2>Security Impact<a class="headerlink" href="#security-impact" title="Link to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section does not replace a formal security impact analysis. This only guides the design thoughts behind security related topics and is to be understood as a starting point for later workflows.</p>
</div>
<p>The memory underlying an ABI compatible type may potentially be corrupted, e.g., because it originates from an untrusted process, or because of a bug in the producer. As a consequence, any pointers, indices, and offsets need to be validated before they’re used to access memory, to ensure they don’t address any out-of-bounds locations. In addition, care must be taken to avoid TOC/TOU (<em>time-of-check to time-of-use</em>) issues, where the producer might maliciously or inadvertently modify a value after the consumer has already validated it.</p>
</section>
<section id="safety-impact">
<h2>Safety Impact<a class="headerlink" href="#safety-impact" title="Link to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section does not replace a formal safety impact analysis. This only guides the design thoughts behind safety related topics and is to be understood as a starting point for later workflows.</p>
</div>
<p>All functionality shall be available to applications rated up to ASIL-B.</p>
</section>
<section id="rejected-ideas">
<h2>Rejected Ideas<a class="headerlink" href="#rejected-ideas" title="Link to this heading">#</a></h2>
<section id="reflection">
<h3>Reflection<a class="headerlink" href="#reflection" title="Link to this heading">#</a></h3>
<p>Reflection, in this context, is the ability to inspect data at runtime even if its structure is not or not fully known at compile time.
Benefits of reflection include being able to translate recorded data into a human-readable format (e.g., JSON or CSV) without having to know the type definitions at compile time; this enables general-purpose data recording and transformation tools.</p>
<p>This ability requires some form of <em>type structure metadata</em> being available at runtime, so that a sequence of bytes can be interpreted as a data structure.
There are two primary approaches to achieve this goal:</p>
<ul class="simple">
<li><p><em>inline type descriptions</em>, which precede each instance of every type, and</p></li>
<li><p><em>external type descriptions</em>, which are stored separately from the data.</p></li>
</ul>
<section id="inline-type-descriptions">
<h4>Inline Type Descriptions<a class="headerlink" href="#inline-type-descriptions" title="Link to this heading">#</a></h4>
<p>An explicit transformation step between the in-memory representation and the SOME/IP+TLV format can – in theory – be avoided by adding TLVs to ABI compatible types.
This approach, however, comes with significant downsides:</p>
<ul class="simple">
<li><p>Adding inline type descriptions incurs a significant memory overhead across the board, and leads to worse cache behavior.</p></li>
<li><p>It mandates TLV for <em>all</em> instances of <em>all</em> ABI compatible types, even when TLV is not needed (for example, in a non-TLV SOME/IP gateway).
* This might be mitigated by making TLV optional through a generic respectively a template parameter on the type declaration.</p></li>
<li><p>SOME/IP’s specification of big-endianness is in conflict with the requirement of native-endianness for ABI compatible types, making the feasibility of this approach questionable.</p></li>
<li><p>SOME/IP doesn’t support “unused” slots in dynamic arrays, so ABI compatible types containing <em>vectors</em> (which differentiate between the length and the capacity) couldn’t be directly represented in SOME/IP anyway.</p></li>
</ul>
</section>
<section id="alternative-approach">
<h4>Alternative Approach<a class="headerlink" href="#alternative-approach" title="Link to this heading">#</a></h4>
<p>Instead of inserting inline type descriptions into each instance of an ABI compatible type, the full type structure metadata can be made available to a consumer only once, either proactively or on request.
The consumer decides if it uses or ignores this metadata.</p>
<p>This description of the type structure can be used to dynamically translate between the compact, non-reflective ABI compatible data structures on one side, and a reflective, inline-describing format on the other side.
Although this incurs a copy and some minor processing, the overhead should be negligible compared to other computational tasks involving the payload.</p>
<p>One method to efficiently translate a payload consisting of ABI compatible types to an inline-described reflective format is to convert the hierarchical type description to a flat list of <em>instructions</em> which can be executed by an interpreter.
Both the instructions and the interpreter would be specific for the target format.
For example, to translate in-memory ABI compatible types to SOME/IP data structures, the instructions could look like this:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span><span class="w"> </span><span class="nc">Transformation</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="sd">/// Copies `length` bytes from input to output.</span>
<span class="w">    </span><span class="nb">Copy</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">length</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="p">,</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="sd">/// Copies 2 bytes from input to output, swapping endianness.</span>
<span class="w">    </span><span class="n">SwapEndian2</span><span class="p">,</span>

<span class="w">    </span><span class="sd">/// Copies 4 bytes from input to output, swapping endianness.</span>
<span class="w">    </span><span class="n">SwapEndian4</span><span class="p">,</span>

<span class="w">    </span><span class="sd">/// Copies 8 bytes from input to output, swapping endianness.</span>
<span class="w">    </span><span class="n">SwapEndian8</span><span class="p">,</span>

<span class="w">    </span><span class="sd">/// Reads an ABI compatible vector (with an element size of `stride` bytes) from the input,</span>
<span class="w">    </span><span class="sd">/// writes the length as big-endian to the output, and writes the given number of elements</span>
<span class="w">    </span><span class="sd">/// to the output.</span>
<span class="w">    </span><span class="n">CopyVectorWithLength</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">stride</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="p">},</span>

<span class="w">    </span><span class="o">..</span><span class="p">.</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="rationale-for-rejection">
<h4>Rationale for Rejection<a class="headerlink" href="#rationale-for-rejection" title="Link to this heading">#</a></h4>
<p>Reflection will not be part of version 1.0 of this feature request.</p>
<ul class="simple">
<li><p>Inline type descriptions are too intrusive and generate too much overhead:</p>
<ol class="arabic simple">
<li><p>Choosing one particular format, like SOME/IP TLV, would bias the entire system against other formats.</p></li>
<li><p>To take full advantage of zero-copy IPC, ABI compatible types must be used during production and consumption of the transmitted data. Having to carry around inline type descriptions in those computations would have a non-negligible performance overhead.</p></li>
<li><p>The specification for SOME/IP types is incompatible with the requirement of ABI vectors that can grow dynamically during construction, i.e., vectors which contain fewer valid elements than they take up space in memory.</p></li>
<li><p>Inserting inline type descriptions on demand is expected to be a relatively cheap operation, which negates the main motivation for including them directly in ABI types in the first place.</p></li>
</ol>
</li>
<li><p>External type structure descriptions will probably be included in a later version of this feature request.
For now, they’re postponed until we have a better understanding of the relevant use cases.</p></li>
</ul>
</section>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../some_ip_gateway/service_discovery/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">SOME/IP Gateway Service Discovery</p>
      </div>
    </a>
    <a class="right-next"
       href="requirements.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Requirements</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-flag">Feature flag</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#abstract">Abstract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#abi-compatibility">ABI Compatibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#type-description">Type Description</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specification">Specification</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">ABI Compatibility</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#type-conformance">Type Conformance</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#type-categories">Type Categories</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#primitive-types">Primitive Types</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#structs-and-tuples">Structs and Tuples</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#enums">Enums</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#arrays">Arrays</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#vectors">Vectors</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#strings">Strings</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#option-types">Option Types</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#result-types">Result Types</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#language-conformance-summary">Language Conformance Summary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Type Description</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#workflows">Workflows</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#type-structure-metadata">Type Structure Metadata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#security-impact">Security Impact</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#safety-impact">Safety Impact</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rejected-ideas">Rejected Ideas</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection">Reflection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inline-type-descriptions">Inline Type Descriptions</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#alternative-approach">Alternative Approach</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#rationale-for-rejection">Rationale for Rejection</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/rmaddikery/reference_integration/edit/main/docs/_collections/score_platform/docs/features/communication/abi_compatible_data_types/index.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>